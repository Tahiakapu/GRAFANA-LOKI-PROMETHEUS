---
title: "Stage ISPF - Stack observation"
author: "Tahia KAPU"
format: pptx
editor: visual
theme: dracula
---

## C'est quoi une stack d'observation ?

Une stack d'observation permet de surveiller le fonctionnement d'un systÃ¨me ou d'une application.

-   Identifier les erreurs
-   Analyser les performances
-   Visualiser les donnÃ©es en temps rÃ©el

Elle repose sur : 

- **Logs** (ce qu'il s'est passÃ©) 
- **MÃ©triques** (ce quâ€™il se passe en chiffres)

------------------------------------------------------------------------

## DÃ©finitions

### ğŸ§¾ Logs â€“ Ce quâ€™il sâ€™est passÃ©

Un **log** est un message texte Ã©crit par un programme

#### RFC 5424
```
<34>1 2025-07-24T14:30:10.123Z host.example.com sshd 12345 ID47 - User login successful for 'jdoe'
```


------------------------------------------------------------------------

| **Partie**                         | **Valeur**          | **Description**                                        |
| ---------------------------------- | ------------------- | ------------------------------------------------------ |
| `<34>`                             | **PRI**             | PrioritÃ© du message : (Facility Ã— 8 + Severity)        |
| `2025-07-24`         | **Timestamp**       | Date/heure ISO 8601 avec millisecondes                 |
| `host.example.com`                 | **Hostname**        | Nom de lâ€™hÃ´te qui envoie le message                    |
| `sshd`                             | **App-name**        | Nom de l'application ou service                        |
| `12345`                            | **Procid**          | ID du processus (souvent PID)                          |
| `User login...` | **Message (msg)**   | Contenu du message                                     |


------------------------------------------------------------------------

### ğŸ“Š MÃ©triques â€“ Ce quâ€™il se passe (en chiffres)

Une **mÃ©trique** est une valeur numÃ©rique mesurÃ©e rÃ©guliÃ¨rement :

-   Exemples :
    -   Temps de rÃ©ponse
    -   Taux d'erreur
    -   Nombre de requÃªtes/sec

------------------------------------------------------------------------

#### Prometheus format :

```text
node_cpu_usage_percent{instance="server1", core="0"} 12.4
```


| **Partie**                       | **Signification**                                           |
| -------------------------------- | ----------------------------------------------------------- |
| `node_cpu_usage_percent`         | Nom de la mÃ©trique : pourcentage dâ€™utilisation CPU          |
| `{instance="server1", core="0"}` | Ã‰tiquettes (labels) : identifient le serveur et le cÅ“ur CPU |
| `12.4`                           | Valeur actuelle : 12,4 % de CPU utilisÃ© sur ce cÅ“ur         |

------------------------------------------------------------------------


## ğŸ“ˆ Visualisation â€“ Avec Grafana

**Grafana** permet de crÃ©er des tableaux de bord pour :

-   Visualiser les **mÃ©triques** (depuis Prometheus)
-   Lire les **logs** (depuis Loki)
-   Avoir une **vue dâ€™ensemble rapide et claire**

------------------------------------------------------------------------

## ğŸ§  RÃ©sumÃ© simple

| Outil | Sert Ã  quoi ? | Type de donnÃ©es |
|------------------|-------------------------------|-----------------------|
| **Loki** | Lire ce quâ€™il sâ€™est passÃ© (logs) | Textes (messages) |
| **Prometheus** | Suivre les chiffres (mÃ©triques) | Nombres (compteursâ€¦) |
| **Grafana** | Voir tout joliment | Graphiques / tableaux de bord |

------------------------------------------------------------------------

## ğŸ›ï¸ Infrastructure

L'ISPF utilise Proxmox VE comme solution de virtualisation.

| **NÅ“ud**     | **cores** | **MÃ©moire**   |
|--------------|-----------|---------------|
| `dellR530`   | 40        | 62.7 GiB      |
| `dl360-hv7`  | 40        | 94.0 GiB      |
| `dl360-hv8`  | 40        | 94.0 GiB      |
| `dl360-hv9`  | 48        | 125.6 GiB     |
| **ğŸŸ° Total** | **168**   | **376.3 GiB** |

------------------------------------------------------------------------

## ğŸ›ï¸VM

![](promox-ispf.jpg)

------------------------------------------------------------------------

## Screenshots (Logs)

![](graylog.jpg)

------------------------------------------------------------------------

## Screenshots (Logs)

![](log-grafana.jpg)

------------------------------------------------------------------------

## Screenshots (MÃ©triques)

![](observium.jpg)

------------------------------------------------------------------------

## Screenshots (MÃ©triques)

![](influx.jpg)

------------------------------------------------------------------------

## Screenshots (Grafana)

![](grafana1.jpg)

------------------------------------------------------------------------

## Screenshots (Grafana)

![](grafana2.jpg)

------------------------------------------------------------------------

## HÃ©bergement sur Docker

| **ğŸ” CritÃ¨re** | **ğŸ–¥ï¸ VM** | **ğŸ³ Docker** |
|------------------|--------------------------|----------------------------|
| âš¡ DÃ©marrage | ğŸ¢ Lent | ğŸš€ TrÃ¨s rapide |
| âš–ï¸ Poids | ğŸ‹ï¸â€â™‚ï¸ Lourd (avec OS complet) | ğŸª¶ LÃ©ger (sans OS complet) |
| ğŸ”’ Isolation | ğŸ” TrÃ¨s forte (OS sÃ©parÃ©) | ğŸ”“ Moins forte (partage du noyau) |
| ğŸŒ PortabilitÃ© | ğŸš› Moyenne | ğŸ“¦ Excellente |
| ğŸ§° Utilisation | ğŸ§ª Tester des systÃ¨mes complets | âš™ï¸ DÃ©ployer des applis lÃ©gÃ¨res |

## Merci !
